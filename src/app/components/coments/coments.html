<button class="btn comment-btn" (click)="abrirModal()">ğŸ’¬ Comentarios</button>

<div class="modal-overlay" *ngIf="modalVisible()" (click)="cerrarModal()">
  <div class="comentarios-modal" (click)="$event.stopPropagation()">
    <button class="close-btn" (click)="cerrarModal()">âœ–</button>
    <h3>Comentarios</h3>

    <div class="nuevo-comentario">
      <input
        type="text"
        [ngModel]="nuevoComentario()"
        (ngModelChange)="nuevoComentario.set($event); errorComentario.set('')"
        placeholder="Escribir comentario..."
        maxlength="100"
      />

      <div class="comment-info">
        <small class="contador">{{ nuevoComentario().length }}/100</small>
        <label *ngIf="errorComentario()" class="error-label">
          {{ errorComentario() }}
        </label>
      </div>

      <button (click)="agregarComentario()">Enviar</button>
    </div>

    <div *ngIf="loading()">Cargando...</div>

    <ul>
      <li *ngFor="let c of comentarios()">
        <div class="comment-content">
          <strong>{{ c.usuario.username }}</strong>
          <p>{{ c.texto }}</p>
        </div>

        <div class="comment-actions">
          <button (click)="c.liked ? quitarLike(c) : darLike(c)">
            {{ c.liked ? 'ğŸ’™' : 'ğŸ¤' }} {{ c.likesCount }}
          </button>
        </div>
      </li>
    </ul>

    <button *ngIf="offset() + limit() < total()" (click)="cargarMas()">
      Cargar mÃ¡s
    </button>
  </div>
</div>
