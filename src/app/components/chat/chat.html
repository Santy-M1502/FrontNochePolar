<button 
  type="button" 
  class="chat-toggle" 
  *ngIf="!chatOpen()" 
  (click)="openCloseModal()">
  ðŸ’¬
</button>

<div class="chat-panel" [class.open]="chatOpen()">

  <button type="button" class="chat-close" (click)="openCloseModal()">
    &times;
  </button>

  <!-- LISTA DE CONTACTOS -->
  <div class="contact-list">
    <h3>Chats</h3>
    <div 
      class="contact"
      *ngFor="let amigo of amigos()"
      (click)="abrirChatCon(amigo.id)"
      [class.active]="destinatarioId() === amigo.id">

      {{ amigo.nombre }}
    </div>
  </div>

  <div class="chat-area" *ngIf="tieneChatAbierto(); else noChat">

    <div class="chat-box" #chatBox>
      <div 
        *ngFor="let msg of chats()" 
        class="msg"
        [class.me]="msg.me">

        {{ msg.text }}
      </div>
    </div>

    <div class="chat-input">
      <input 
        type="text" 
        placeholder="EscribÃ­ un mensaje..."
        [(ngModel)]="newMessage"
        (keyup.enter)="sendMessage()"/>

      <button type="button" class="send-btn" (click)="sendMessage()">
        âž¤
      </button>
    </div>

  </div>

  <ng-template #noChat>
    <div class="empty-chat">
      <p>ElegÃ­ un contacto para empezar a chatear.</p>
    </div>
  </ng-template>

</div>

<div 
  class="chat-backdrop" 
  *ngIf="chatOpen()" 
  (click)="chatOpen.set(false)">
</div>
