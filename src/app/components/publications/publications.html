<div class="body">
  <app-side-nav></app-side-nav>

  <div class="feed-area" #feedArea>

    <div class="composer">
      <input
        type="text"
        [(ngModel)]="newTitle"
        placeholder="Título de la publicación"
        class="composer-title"
        (input)="onTitleInput()"
        maxlength="20"
      />
      <label *ngIf="errorTitulo" class="error-label">{{ errorTitulo }}</label>

      <textarea
        [(ngModel)]="newPost"
        placeholder="¿Qué estás pensando?"
        class="composer-text"
        (input)="onTextInput()"
        maxlength="20"
      ></textarea>
      <label *ngIf="errorTexto" class="error-label">{{ errorTexto }}</label>

      <input
        type="file"
        accept="image/*"
        (change)="onFileSelected($event)"
        class="composer-file"
      />
      <label *ngIf="fileError" class="error-label">{{ fileError }}</label>

      <div class="composer-row">
        <button class="btn primary" (click)="sendPost()" [appLoading]="isUploading">Publicar</button>
      </div>
    </div>

    <div class="filters">
      <select [(ngModel)]="filtro" (change)="aplicarFiltro()">
        <option value="ultimas">Últimas</option>
        <option value="antiguas">Más antiguas</option>
        <option value="populares">Más populares</option>
        <option value="conImagen">Con imagen</option>
      </select>

      <input
        type="text"
        [(ngModel)]="busqueda"
        placeholder="Buscar..."
        (keyup.enter)="buscar()"
      />
      <button class="btn" (click)="buscar()">Buscar</button>
    </div>

    <div class="timeline">
      <app-publicacion
        *ngFor="let p of posts"
        [publicacion]="p"
        [usuarioActualId]="usuarioActualId"
        (eliminar)="onPublicacionEliminada($event)">
      </app-publicacion>
    </div>

    <button class="btn load-more" (click)="cargarMas()">Cargar más</button>
    <app-scroll-to-top [scrollTarget]="feedArea"></app-scroll-to-top>
  </div>
  <app-chat></app-chat>
</div>